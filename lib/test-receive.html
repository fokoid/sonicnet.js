<html>
  <head>
    <script src="https://raw.githubusercontent.com/thornecc/sonicnet.js/testing/lib/sonicnet.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
  </head>
  <body>
    <main id="main"></main>
    <script>
      const boxMinFreq = $('<input type="text" value="15000" />'),
            boxMaxFreq = $('<input type="text" value="18000" />'),
            textMessage = $('<span></span>'),
            btnReceive = $('<button>Listen</button>');
      const mainControls = $('<div>Message:</div>'),
            freqControls = $('<div></div>'),
            minFreqControls = $('<span>Min. freq:</span>'),
            maxFreqControls = $('<span>Max. freq:</span>');
      minFreqControls.append(boxMinFreq);
      maxFreqControls.append(boxMaxFreq);
      freqControls.append(minFreqControls, maxFreqControls);
      mainControls.append(textMessage, btnReceive);
      $('main').append(mainControls).append(freqControls);

      btnReceive.on('click', event => {
        const freqMin = parseInt(boxMinFreq.val()),
              freqMax = parseInt(boxMaxFreq.val());
        console.log(`Listening at ${freqMin}-${freqMax}Hz.`);

        const sreceiver = new SonicReceiver({ freqMin, freqMax });
        sreceiver.on('message', x => {
          console.log(`Received ${x} at ${freqMin}-${freqMax}Hz.`);
          textMessage.test(x);
        });
        sreceiver.start();
      });
    </script>
  </body>
</html>
